<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <title>JOGOW</title>
    <link rel="stylesheet" href="meu.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.9.359/pdf.min.js"></script>
</head>
<body>
<picture><img class="icon" src="jogow.png"></picture>

<h3>Acerte antes de acabar o tempo</h3>
<div id="timer">60</div>
<button onclick="iniciarContagem()">Iniciar Contagem</button>
<button onclick="reiniciarContagem()">Reiniciar Contagem</button>


    <h1>Baralho de Dicas</h1>
    <button id="randomPageBtn1">Sortear Carta</button>
    <p>Descubra quem é a pessoa com até 3 dicas <br>(inclua dicas sobre alguém da congregação)</p>
    <canvas id="pdfCanvas1"></canvas>
    <br><hr>

    <h1>Baralho para Mímica</h1>
    <button id="randomPageBtn2">Sortear Carta</button>
    <p>Descubra o que tem na Bíblia por meio de mímica</p>
    <canvas id="pdfCanvas2"></canvas>
    <br><hr>

    <h1>Baralho Bíblico</h1>
    <button id="randomPageBtn3">Sortear Carta</button>
    <p>Acerte qual é o versículo ou livro da Bíblia</p>
    <canvas id="pdfCanvas3"></canvas>
    <br><hr>

    <script>
  let tempoRestante = 60; // Definir os 60 segundos
        let intervalo; // Variável para armazenar o intervalo

        function iniciarContagem() {
            // Se já houver um intervalo, limpar antes de começar outro
            if (intervalo) {
                clearInterval(intervalo);
            }
            tempoRestante = 60; // Reiniciar o tempo para 60 segundos
            document.getElementById("timer").textContent = tempoRestante;

            // Atualizar o timer a cada segundo (1000 ms)
            intervalo = setInterval(() => {
                document.getElementById("timer").textContent = tempoRestante;
                tempoRestante--; // Decrementa o tempo

                // Verificar se o tempo chegou a 0
                if (tempoRestante < 0) {
                    clearInterval(intervalo); // Parar o intervalo
                    document.getElementById("timer").textContent = "Tempo esgotado!";
                    console.log("Tempo finalizado!");
                }
            }, 1000); // A cada 1000ms (1 segundo)
        }

        function reiniciarContagem() {
            // Limpar o intervalo existente e reiniciar a contagem
            clearInterval(intervalo);
            iniciarContagem();
        }


        
        // Função para carregar e sortear página aleatória de um PDF
        function loadAndRandomPage(pdfUrl, canvasId) {
            let pdfDoc = null;
            const canvas = document.getElementById(canvasId);
            const ctx = canvas.getContext('2d');

            // Carregar o PDF
            pdfjsLib.getDocument(pdfUrl).promise.then(function (pdf) {
                pdfDoc = pdf;
            });

            // Função para sortear uma página aleatória
            function randomPage() {
                if (pdfDoc) {
                    const totalPages = pdfDoc.numPages;
                    const randomPageNumber = Math.floor(Math.random() * totalPages) + 1;

                    // Renderizar a página sorteada
                    pdfDoc.getPage(randomPageNumber).then(function (page) {
                        const viewport = page.getViewport({ scale: 1.5 });
                        canvas.height = viewport.height;
                        canvas.width = viewport.width;

                        const renderContext = {
                            canvasContext: ctx,
                            viewport: viewport
                        };
                        page.render(renderContext);
                    });
                }
            }

            return randomPage;
        }

        // Funções específicas para cada PDF
        const randomPage1 = loadAndRandomPage('PESSOAS.pdf', 'pdfCanvas1');
        const randomPage2 = loadAndRandomPage('MIMICA.pdf', 'pdfCanvas2');
        const randomPage3 = loadAndRandomPage('BIBLIA.pdf', 'pdfCanvas3');

        // Botões de sorteio
        document.getElementById('randomPageBtn1').addEventListener('click', randomPage1);
        document.getElementById('randomPageBtn2').addEventListener('click', randomPage2);
        document.getElementById('randomPageBtn3').addEventListener('click', randomPage3);
    </script>

</body>
</html>
